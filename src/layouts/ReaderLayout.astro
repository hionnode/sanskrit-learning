---
import BaseLayout from './BaseLayout.astro';
import TextLayerToggles from '../components/islands/reading/TextLayerToggles.tsx';
import type { CollectionEntry } from 'astro:content';
import { CATEGORY_LABELS, DIFFICULTY_LABELS } from '../lib/labels';

interface Props {
  reading: CollectionEntry<'readings'>;
}

const { reading } = Astro.props;
const data = reading.data;
---
<BaseLayout title={data.title_hi}>
  <div class="max-w-2xl mx-auto px-4 py-8">
    <header class="mb-8">
      <div class="flex items-center gap-2 mb-2">
        <span class="text-xs font-medium px-2 py-1 rounded-full bg-vermillion/10 text-vermillion dark:text-vermillion-light">
          {CATEGORY_LABELS[data.category] || data.category}
        </span>
        <span class="text-xs font-medium px-2 py-1 rounded-full bg-stone-100 dark:bg-charcoal-700 text-stone-600 dark:text-stone-400">
          {DIFFICULTY_LABELS[data.difficulty] || data.difficulty}
        </span>
      </div>
      <h1 class="text-2xl md:text-3xl font-bold text-ink dark:text-stone-100">
        {data.title_hi}
      </h1>
    </header>

    <h2 class="text-xl font-bold text-ink dark:text-stone-100 mb-4">मूल पाठ</h2>

    <TextLayerToggles
      sanskritText={data.sanskrit_text}
      padachheda={data.padachheda}
      wordMeanings={data.word_meanings}
      anvaya={data.anvaya}
      translationHi={data.translation_hi}
      client:visible
    />

    <div class="mt-8 prose prose-stone dark:prose-invert max-w-none">
      <slot />
    </div>

    <div class="mt-8 pt-6 border-t border-border-subtle dark:border-charcoal-700">
      <a
        href="/hi/library"
        class="inline-flex items-center gap-2 text-sm text-vermillion dark:text-vermillion-light hover:text-vermillion-dark transition-colors min-h-[44px]"
      >
        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6" /></svg>
        पुस्तकालय पर वापस
      </a>
    </div>
  </div>
</BaseLayout>
