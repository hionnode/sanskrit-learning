@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face {
  font-family: 'Tiro Devanagari Sanskrit';
  src: url('/fonts/TiroDevanagariSanskrit-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Manrope';
  src: url('/fonts/Manrope-Regular.woff2') format('woff2');
  font-weight: 400 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Noto Sans Devanagari';
  src: url('/fonts/NotoSansDevanagari-Regular.woff2') format('woff2');
  font-weight: 400 700;
  font-style: normal;
  font-display: swap;
  unicode-range: U+0900-097F, U+1CD0-1CFF, U+200C-200D, U+20B9, U+25CC, U+A8E0-A8FF;
}

@layer base {
  body {
    @apply bg-paper text-ink dark:bg-charcoal-900 dark:text-stone-200;
    line-height: 1.8;
  }

  /* Sanskrit text styling — serif font */
  [lang="sa"] {
    font-family: 'Tiro Devanagari Sanskrit', 'Noto Serif', serif;
    line-height: 2.0;
  }
}

@layer components {
  .sanskrit-example {
    @apply text-sanskrit font-serif bg-surface-palm dark:bg-charcoal-800 px-4 py-3 rounded-md border-t-4 border-vermillion;
    line-height: 2.0;
  }

  .grammar-table-wrapper {
    @apply overflow-x-auto -mx-4 px-4;
    /* Scroll shadow indicator on mobile — paper bg */
    background:
      linear-gradient(to right, #fbf9f8 30%, rgba(251, 249, 248, 0)),
      linear-gradient(to right, rgba(251, 249, 248, 0), #fbf9f8 70%) 0 100%,
      radial-gradient(farthest-side at 0% 50%, rgba(88, 56, 45, 0.08), transparent),
      radial-gradient(farthest-side at 100% 50%, rgba(88, 56, 45, 0.08), transparent) 0 100%;
    background-repeat: no-repeat;
    background-size: 40px 100%, 40px 100%, 14px 100%, 14px 100%;
    background-position: 0 0, 100%, 0 0, 100%;
    background-attachment: local, local, scroll, scroll;
  }

  .dark .grammar-table-wrapper {
    background:
      linear-gradient(to right, #211411 30%, rgba(33, 20, 17, 0)),
      linear-gradient(to right, rgba(33, 20, 17, 0), #211411 70%) 0 100%,
      radial-gradient(farthest-side at 0% 50%, rgba(255, 255, 255, 0.08), transparent),
      radial-gradient(farthest-side at 100% 50%, rgba(255, 255, 255, 0.08), transparent) 0 100%;
    background-repeat: no-repeat;
    background-size: 40px 100%, 40px 100%, 14px 100%, 14px 100%;
    background-position: 0 0, 100%, 0 0, 100%;
    background-attachment: local, local, scroll, scroll;
  }

  .border-ornamental {
    border-style: dashed;
    border-color: #d53e20;
  }
}

@layer utilities {
  /* Focus ring for keyboard-only navigation */
  .focus-ring {
    @apply focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-vermillion;
  }

  /* Fade in for results screen */
  .animate-fadeIn {
    animation: fadeIn 200ms ease-out both;
  }

  /* Hide scrollbar for lesson pill overflow */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* No scrollbar — used on typing page main area */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Lotus / cross-hatch pattern — subtle manuscript grid */
  .lotus-pattern {
    background-color: transparent;
    opacity: 0.4;
    background-image: linear-gradient(#d53e20 0.8px, transparent 0.8px),
                       linear-gradient(to right, #d53e20 0.8px, #fbf9f8 0.8px);
    background-size: 24px 24px;
    mask-image: radial-gradient(circle at center, black 40%, transparent 80%);
  }

  .dark .lotus-pattern {
    background-image: linear-gradient(rgba(213, 62, 32, 0.5) 0.8px, transparent 0.8px),
                       linear-gradient(to right, rgba(213, 62, 32, 0.5) 0.8px, #211411 0.8px);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Print styles */
@media print {
  nav, footer, .grammar-table-wrapper { break-inside: avoid; }
  .dark { color-scheme: light; }
  body { background: white !important; color: #1b100e !important; }
  a[href]::after { content: " (" attr(href) ")"; font-size: 0.8em; }
  .no-print, button { display: none !important; }
}
